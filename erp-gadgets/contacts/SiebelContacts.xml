<?xml version="1.0" encoding="UTF-8"?>
<Module>
    <ModulePrefs
            title="My Accounts"
            author="Vivek Srinivasan"
            author_email="vivek.athrey@gmail.com" height="100">
        <Require feature="views" />
        <Require feature="dynamic-height" />
    </ModulePrefs>
    <Content type="html"><![CDATA[
  <script type="text/javascript" src="http://www.google.com/jsapi"></script>
  <script type="text/javascript">
   google.load("gdata", "1.s");	
   google.setOnLoadCallback(initFunc);	
   
   function initFunc(){
   alert('Library loaded');
   }  
   
	function getData() {
	  var params = {};
	  params[gadgets.io.RequestParameters.CONTENT_TYPE] = gadgets.io.ContentType.TEXT;
	  var url = "http://code.google.com/securedataconnector/docs/tutorials/contacts.csv";
	  gadgets.io.makeRequest(url, function(response){log(response);}, params);
	}

	  // Callback function to process the response
	function log(response) {               
	    var responseText = obj.text;  
	// Set CSS for div.
	/*
	 * Create a contact entry
	 */ 
	
	// Create the contacts service object
	var contactsService =
	    new google.gdata.contacts.ContactsService('GoogleInc-jsguide-1.0');
	
	// The feed URI that is used to create a contact entry
	var feedUri = 'http://www.google.com/m8/feeds/contacts/default/full';
	
	// Create an instance of ContactEntry
	var entry = new google.gdata.contacts.ContactEntry();
	
	// Set the name of the contact
	entry.setTitle(google.gdata.Text.create('Vivek Srinivasan'));
	
	// Set the content of the contact
	entry.setContent(google.gdata.Text.create('Test'));
	
	// Create an email instance
	var email = new google.gdata.Email();
	email.setAddress('JS-Client@domain.com');
	email.setPrimary(true);
	// Designate this email as the "home" email
	email.setRel(google.gdata.Email.REL_HOME);
	
	// Add the email instance
	entry.setEmailAddresses([email]);
	
	// The callback method that will be called after a successful insertion from insertEntry()
	var callback = function(result) {
	  PRINT('contact entry created!');
	}
	
	// Error handler will be invoked if there is an error from insertEntry()
	var handleError = function(error) {
	  PRINT(error);
	}
	
	// Submit the request using the contacts service object
	contactsService.insertEntry(feedUri, entry, callback, 
	    handleError, google.gdata.contacts.ContactEntry);
	    
	}
   gadgets.util.registerOnLoadHandler(getData);
   
 </script>]]>
 </Content>
</Module>